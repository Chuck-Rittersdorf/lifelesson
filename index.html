<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Homepage Template</title>

    <style>
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;color:#333;overflow:hidden;padding-bottom:70px}
        #geometric-background{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}
        .content-wrapper{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 70px);padding:20px;box-sizing:border-box;overflow-y:auto}
        .container{background-color:rgba(255,255,255,0.9);padding:20px 30px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.15);max-width:900px;width:90%;text-align:center;position:relative;z-index:1}
        .lesson-and-tao-wrapper{display:flex;gap:30px;justify-content:space-between;margin-top:20px}
        #lesson-display, #tao-te-ching-display{flex:1;padding:15px;border-radius:8px;background-color:rgba(245,245,245,0.8);text-align:left;min-height:150px;display:flex;flex-direction:column}
        #lesson-display{cursor:pointer;align-items:center}
        #tao-te-ching-display{cursor:pointer}
        #lesson-title{font-size:1.3em;color:#16a085;margin-bottom:10px;margin-top:0;width:100%}
        #lesson-text{font-size:1em;line-height:1.6;color:#444;margin-top:0;flex-grow:1;width:100%}
        
        #nasa-apod-media-container{width:100%;max-width:560px;margin:0 auto 10px auto;background-color:#000;border-radius:8px;overflow:hidden;min-height:300px; display:flex; align-items:center; justify-content:center;}
        #nasa-apod-media-container img{display:block;width:100%;height:auto;max-height:300px;object-fit:contain;border-radius:8px}
        .apod-video-wrapper{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;width:100%;background:#000;border-radius:8px}
        .apod-video-wrapper iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}
        
        #nasa-apod-explanation{font-size:.9em;color:#555;margin-top:0;padding:0 5px;text-align:center;display:block;max-height:80px;overflow-y:auto;margin-bottom:10px}
        #nasa-apod-explanation a{color:#16a085;text-decoration:none}
        #nasa-apod-explanation a:hover{text-decoration:underline}
        .apod-error-message { font-size: 0.9em; color: red; margin-top: 5px; }
        .apod-error-message a{color:#0056b3;text-decoration:underline}

        #tao-image{display:block;max-width:100%;height:auto;max-height:300px;object-fit:contain;border-radius:8px;margin:0 auto 10px auto}
        #potd-description-container{font-size:.9em;color:#555;margin-top:5px;padding:0 5px;text-align:center;display:block;max-height:80px;overflow-y:auto;margin-bottom:10px}
        #potd-description-container a{color:#2980b9;text-decoration:none}
        #potd-description-container a:hover{text-decoration:underline}
        #tao-te-ching-title{font-size:1.3em;color:#2980b9;margin-bottom:10px;margin-top:0;display:none}
        #tao-te-ching-text{font-size:1em;line-height:1.6;color:#444;margin-top:0;white-space:pre-line;display:none;flex-grow:1;overflow-y:auto;max-height:380px}
        @media (max-width:768px){.lesson-and-tao-wrapper{flex-direction:column;gap:20px}#lesson-display,#tao-te-ching-display{max-width:100%}#lesson-display > #lesson-title,#lesson-display > #lesson-text{text-align:left}#tao-te-ching-display{align-items:center}#tao-te-ching-display > #tao-te-ching-title,#tao-te-ching-display > #tao-te-ching-text{text-align:left;width:100%}.container{padding:20px 15px}#nasa-apod-media-container img,#tao-image{max-height:200px}#nasa-apod-explanation,#potd-description-container{max-height:60px}#tao-te-ching-text{max-height:260px}}
        .quick-links{position:fixed;bottom:0;left:0;width:100%;background-color:rgba(245,245,245,0.85);backdrop-filter:blur(5px);padding:10px 0;display:flex;justify-content:center;align-items:center;gap:22px;z-index:100;border-top:1px solid rgba(0,0,0,0.08);box-shadow:0 -2px 5px rgba(0,0,0,0.05)}
        .quick-links a{display:inline-block;transition:transform .2s ease-in-out,opacity .2s ease-in-out;opacity:.9}
        .quick-links a:hover{transform:translateY(-3px);opacity:1}
        .quick-links img{height:30px;width:auto;vertical-align:middle}
    </style>
</head>
<body>
    <canvas id="geometric-background"></canvas>
    <div class="content-wrapper">
        <div class="container">
            <h1>Your Homepage Title</h1> 
            <div class="lesson-and-tao-wrapper">
                <div id="lesson-display">
                    <div id="nasa-apod-media-container">
                         <img src="https://placehold.co/600x400/333333/FFFFFF?text=Loading+NASA+APOD..." alt="Loading NASA APOD">
                    </div>
                    <div id="nasa-apod-explanation" style="display: block;">
                        </div>
                    <h2 id="lesson-title" style="display: none;"></h2>
                    <p id="lesson-text" style="display: none;"></p>
                </div>
                <div id="tao-te-ching-display">
                    <img id="tao-image" src="https://placehold.co/600x400/eeeeee/999999?text=Loading+POTD..." alt="Picture of the Day">
                    <div id="potd-description-container">
                        </div>
                    <h3 id="tao-te-ching-title"></h3>
                    <p id="tao-te-ching-text"></p>
                </div>
            </div>
        </div>
    </div>
    <div class="quick-links">
        <p style="color: #555; font-size: 0.9em;">Quick links will appear here.</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Element Selectors ---
            const lessonTitleElement = document.getElementById('lesson-title');
            const lessonTextElement = document.getElementById('lesson-text');
            const nasaApodMediaContainer = document.getElementById('nasa-apod-media-container');
            const nasaApodExplanationElement = document.getElementById('nasa-apod-explanation');
            const lessonDisplayContainer = document.getElementById('lesson-display');
            
            const taoImageElement = document.getElementById('tao-image');
            const potdDescriptionContainer = document.getElementById('potd-description-container');
            const taoTitleElement = document.getElementById('tao-te-ching-title');
            const taoTextElement = document.getElementById('tao-te-ching-text');
            const taoDisplayContainer = document.getElementById('tao-te-ching-display');
            
            const canvas = document.getElementById('geometric-background');
            const ctx = canvas.getContext('2d');

            let lessonContentState = 'image'; 
            let taoContentState = 'image'; 
            let shapes = [];
            let numShapes, baseSpeed, baseHue, minSize, maxSize, connectionDistance, canvasBackgroundColor;
            let animationFrameId;

            const lessons = [ /* { title: "Placeholder Lesson", text: "Content..." } */ ];
            const taoTeChingChapters = [ /* { title: "Chapter Placeholder", text: "Content..." } */ ];

            async function fetchNasaApod() {
                const nasaApiKey = 'NyyGoLiGKX7pg76t9ehi4L8n0MHQuHw8xV6QHLNm'; 
                
                // Fetching for the current date by default (NASA APOD API defaults to "today" in US ET)
                const apodApiUrl = `https://api.nasa.gov/planetary/apod?api_key=${nasaApiKey}&thumbs=true`;
                // For testing with a specific past date (if "today's" APOD has issues or isn't published yet):
                // const specificDate = '2024-07-20'; 
                // const apodApiUrl = `https://api.nasa.gov/planetary/apod?api_key=${nasaApiKey}&date=${specificDate}&thumbs=true`;
                console.log(`Workspaceing NASA APOD (current date target) using URL: ${apodApiUrl}`);


                const apodUnavailablePlaceholder = 'https://placehold.co/600x400/555555/FFFFFF?text=NASA+APOD+Not+Available';
                const apodVideoPlaceholder = 'https://placehold.co/600x400/444444/FFFFFF?text=NASA+Video+Thumbnail';

                if (!nasaApodMediaContainer || !nasaApodExplanationElement) return;
                
                nasaApodMediaContainer.innerHTML = `<img src="https://placehold.co/600x400/333333/FFFFFF?text=Loading+NASA+APOD..." alt="Loading APOD" style="display:block;max-width:100%;height:auto;max-height:300px;object-fit:contain;border-radius:8px;margin:0 auto;">`;
                nasaApodExplanationElement.innerHTML = '<p>Loading APOD explanation...</p>';

                let existingErrorMsg = lessonDisplayContainer.querySelector('.apod-error-message');
                if (existingErrorMsg) existingErrorMsg.remove();

                try {
                    const response = await fetch(apodApiUrl);
                    if (!response.ok) {
                        let errorMsgText = `Failed to fetch NASA APOD: HTTP status ${response.status} (${response.statusText}).`;
                        let responseBodyError = "";
                        try {
                            const errorData = await response.json();
                            if (errorData && errorData.msg) responseBodyError = ` API Message: "${errorData.msg}"`;
                            else if (errorData && errorData.error && errorData.error.message) responseBodyError = ` API Error: "${errorData.error.message}"`;
                            else { const textError = await response.text(); responseBodyError = ` Raw API Response (snippet): "${textError.substring(0,150)}..."`;}
                        } catch (e) { responseBodyError = ` Could not parse error response body.`; }
                        errorMsgText += responseBodyError;
                        if (response.status === 429) errorMsgText += " Status 429 can indicate a rate limit issue with your key.";
                        else if (response.status === 403) errorMsgText += " Status 403 (Forbidden) often indicates an issue with the API Key.";
                        console.warn(errorMsgText);
                        
                        nasaApodMediaContainer.innerHTML = `<img src="${apodUnavailablePlaceholder}" alt="NASA APOD not available." style="display:block;max-width:100%;height:auto;max-height:300px;object-fit:contain;border-radius:8px;margin:0 auto;">`;
                        nasaApodExplanationElement.innerHTML = '<p>APOD explanation not available.</p>';
                        
                        const errorP = document.createElement('p'); errorP.className = 'apod-error-message';
                        let userFacingError = "Could not load NASA Picture of the Day. ";
                        if (String(window.location.protocol).startsWith("file")) { // Check if served from file system
                            userFacingError += "This page might be running from a local file (file:///...). Browsers often block API requests due to CORS security if the page isn't served from a web server (http:// or https://). Try using a local web server.";
                        } else if (response.status === 403) { 
                            userFacingError += "There might be an issue with the API Key. Please ensure it's correct and active.";
                        } else if (response.status === 429) { 
                             userFacingError += "Rate limit possibly exceeded. Please try again later.";
                        } else if (response.status === 404 && apodApiUrl.includes('&date=')) { // Check if specificDate was in use
                            userFacingError += `No APOD found for the date specified in the API URL.`;
                        } else if (response.status === 404) {
                             userFacingError += "Today's APOD might not be published yet by NASA, or the resource was not found.";
                        }else {
                            userFacingError += "Please try again later. Check the browser console (F12) for more details.";
                        }
                        errorP.innerHTML = userFacingError;
                        
                        existingErrorMsg = lessonDisplayContainer.querySelector('.apod-error-message');
                        if (existingErrorMsg) existingErrorMsg.innerHTML = errorP.innerHTML; 
                        else { 
                            if (nasaApodExplanationElement.nextSibling) {
                                lessonDisplayContainer.insertBefore(errorP, nasaApodExplanationElement.nextSibling);
                            } else {
                                lessonDisplayContainer.appendChild(errorP);
                            }
                        }
                        return;
                    }
                    
                    existingErrorMsg = lessonDisplayContainer.querySelector('.apod-error-message');
                    if (existingErrorMsg) existingErrorMsg.remove();

                    const data = await response.json();
                    console.log("NASA APOD API Response (Date: " + data.date + "):", data); 
                    nasaApodMediaContainer.innerHTML = ''; 

                    if (data.media_type === "image") {
                        const img = document.createElement('img');
                        img.src = data.url;
                        img.alt = data.title || "NASA Astronomy Picture of the Day";
                        img.onerror = function() { 
                            if (!this.src.startsWith('https://placehold.co')) {
                                this.src = 'https://placehold.co/600x400/cc0000/ffffff?text=APOD+Image+Error';
                                this.alt = 'NASA APOD image display error';
                            }
                            if(nasaApodExplanationElement) nasaApodExplanationElement.innerHTML = '<p>APOD image could not be displayed.</p>';
                        };
                        nasaApodMediaContainer.appendChild(img);
                    } else if (data.media_type === "video" && data.url) {
                        // Simplified: Show thumbnail and link, no iframe embedding for now for max reliability
                        const img = document.createElement('img');
                        img.src = data.thumbnail_url || apodVideoPlaceholder;
                        img.alt = `Video Thumbnail: ${data.title || "NASA Video"}`;
                        img.onerror = function() { this.src = apodVideoPlaceholder; this.alt = 'Error loading video thumbnail.';};
                        nasaApodMediaContainer.appendChild(img);
                        console.log("APOD is a video. Showing thumbnail. Video URL: " + data.url);
                    } else {
                        const img = document.createElement('img');
                        img.src = apodUnavailablePlaceholder;
                        img.alt = `Unsupported: ${data.media_type || 'Unknown'}. ${data.title || 'NASA Content'}`;
                        nasaApodMediaContainer.appendChild(img);
                    }

                    nasaApodExplanationElement.innerHTML = ''; 
                    if (data.explanation && data.date) {
                        const explanationText = data.explanation;
                        const apodDate = data.date; 
                        const formattedDate = apodDate.substring(2,4) + apodDate.substring(5,7) + apodDate.substring(8,10); 
                        const apodPageUrl = `https://apod.nasa.gov/apod/ap${formattedDate}.html`;

                        // If it was a video, add a prominent link to watch it first
                        if (data.media_type === "video" && data.url) {
                             const videoDirectLinkP = document.createElement('p');
                             videoDirectLinkP.style.marginTop = "0px"; // No top margin if it's the first thing
                             videoDirectLinkP.style.marginBottom = "5px";
                             const videoDirectLinkA = document.createElement('a');
                             videoDirectLinkA.href = data.url;
                             videoDirectLinkA.textContent = `Watch Video: "${data.title || 'Video Content'}"`;
                             videoDirectLinkA.target = "_blank"; videoDirectLinkA.rel = "noopener noreferrer";
                             videoDirectLinkA.style.fontWeight = "bold";
                             videoDirectLinkP.appendChild(videoDirectLinkA);
                             nasaApodExplanationElement.appendChild(videoDirectLinkP); 
                        }

                        const linkElement = document.createElement('a');
                        linkElement.href = apodPageUrl;
                        let displayExplanation = explanationText;
                        if (data.media_type === "video" && explanationText.length > 150) { // Shorter snippet if video link is already there
                            displayExplanation = explanationText.substring(0, 147) + "...";
                        } else if (explanationText.length > 200) {
                            displayExplanation = explanationText.substring(0, 197) + "...";
                        }
                        linkElement.textContent = displayExplanation;
                        linkElement.title = "View full APOD page for: " + (data.title || apodDate); 
                        linkElement.target = '_blank'; linkElement.rel = 'noopener noreferrer';
                        nasaApodExplanationElement.appendChild(linkElement);
                    } else {
                        nasaApodExplanationElement.innerHTML = '<p>APOD explanation not available.</p>';
                    }
                } catch (error) { // This catch is for network errors or if fetch itself fails
                    console.error("General error fetching NASA APOD (e.g., network, CORS if from file://):", error);
                    nasaApodMediaContainer.innerHTML = `<img src="https://placehold.co/600x400/ff0000/ffffff?text=Error+Loading+APOD" alt="Error Loading APOD" style="display:block;max-width:100%;height:auto;max-height:300px;object-fit:contain;border-radius:8px;margin:0 auto;">`;
                    nasaApodExplanationElement.innerHTML = '<p>Error loading APOD explanation.</p>';
                    const errorP = document.createElement('p'); errorP.className = 'apod-error-message';
                    if (String(window.location.protocol).startsWith("file")) {
                        errorP.innerHTML = "Could not load NASA Picture of the Day. This page appears to be running from a local file (file:///...). Browsers often block API requests due to CORS security if the page isn't served from a web server (http:// or https://). Please try using a local web server.";
                    } else {
                        errorP.textContent = 'A network error occurred while fetching the NASA picture. Please check your internet connection and console (F12) for details.';
                    }
                    existingErrorMsg = lessonDisplayContainer.querySelector('.apod-error-message'); 
                    if (existingErrorMsg) existingErrorMsg.innerHTML = errorP.innerHTML; // Use innerHTML for link
                    else {
                        if (nasaApodExplanationElement.nextSibling) lessonDisplayContainer.insertBefore(errorP, nasaApodExplanationElement.nextSibling);
                        else lessonDisplayContainer.appendChild(errorP);
                    }
                }
            }
            
            function displayRandomLesson() { 
                if (lessons.length > 0) { const R=Math.floor(Math.random()*lessons.length); lessonTitleElement.textContent=lessons[R].title; lessonTextElement.textContent=lessons[R].text;}
                else { lessonTitleElement.textContent="Daily Wisdom"; lessonTextElement.textContent="The journey of a thousand miles begins with a single step.";}
            }

            function toggleLessonDisplay() { 
                if (!nasaApodMediaContainer || !lessonTitleElement || !lessonTextElement || !nasaApodExplanationElement) return;
                let err = lessonDisplayContainer.querySelector('.apod-error-message');
                if (lessonContentState === 'image') {
                    nasaApodMediaContainer.style.display = 'none'; nasaApodExplanationElement.style.display = 'none';
                    if(err) err.style.display = 'none'; 
                    lessonTitleElement.style.display = 'block'; lessonTextElement.style.display = 'block';
                    lessonContentState = 'text';
                } else {
                    nasaApodMediaContainer.style.display = 'block'; nasaApodExplanationElement.style.display = 'block';
                    if(err) err.style.display = 'block'; 
                    lessonTitleElement.style.display = 'none'; lessonTextElement.style.display = 'none';
                    lessonContentState = 'image';
                }
            }
            if (lessonDisplayContainer) lessonDisplayContainer.addEventListener('click', toggleLessonDisplay);

            async function fetchPictureOfTheDay() { 
                const today = new Date(); const y = today.getFullYear(), m = String(today.getMonth()+1).padStart(2,'0'), d = String(today.getDate()).padStart(2,'0');
                const apiUrl = `https://api.wikimedia.org/feed/v1/wikipedia/en/featured/${y}/${m}/${d}`;
                if(potdDescriptionContainer) potdDescriptionContainer.innerHTML='<p>Loading...</p>';
                try{const R=await fetch(apiUrl); if(!R.ok)throw new Error(`HTTP ${R.status}`); const D=await R.json();
                    if(D.image?.image?.source){taoImageElement.src=D.image.image.source; let alt=D.image.description?.text||"Wikimedia POTD"; taoImageElement.alt=alt.length>200?alt.substring(0,197)+"...":alt;}
                    else{ console.warn("Wikimedia POTD image data field not found for today.", D); throw new Error("No Wikimedia image data today");}
                    if(potdDescriptionContainer){potdDescriptionContainer.innerHTML=''; if(D.image?.description?.text){const dT=D.image.description.text; let lU=null,lT="";
                        if(D.image.content_urls?.desktop?.page)lU=D.image.content_urls.desktop.page,lT="View Wikipedia article";
                        else if(D.image.file_page)lU=D.image.file_page,lT="View Commons details";
                        if(lU){const a=document.createElement('a');a.href=lU;a.textContent=dT;a.target='_blank';a.rel='noopener noreferrer';a.title=lT;potdDescriptionContainer.appendChild(a);}
                        else potdDescriptionContainer.textContent=dT+" (No link)";}
                        else potdDescriptionContainer.innerHTML='<p>No description.</p>';}}
                catch(e){console.warn(`Wikimedia POTD Error: ${e.message}`);taoImageElement.src='https://placehold.co/600x400/ccc/fff?text=Wiki+POTD+Error';taoImageElement.alt="Error loading Wiki POTD";if(potdDescriptionContainer)potdDescriptionContainer.innerHTML='<p>Wiki POTD Error.</p>';}
            }
            if (taoImageElement) taoImageElement.onerror = function() { 
                 if(!this.src.startsWith('https://placehold.co')){this.src='https://placehold.co/600x400/ddd/888?text=WikiImgErr'; this.alt='Wiki Img Error';}
                 if(potdDescriptionContainer) potdDescriptionContainer.innerHTML = '<p>Wiki Desc Error.</p>'; this.onerror=null;
            };
            
            function displayRandomTaoTeChingChapter() { 
                 if(taoTeChingChapters.length>0){const R=Math.floor(Math.random()*taoTeChingChapters.length);taoTitleElement.textContent=taoTeChingChapters[R].title;taoTextElement.textContent=taoTeChingChapters[R].text;}
                 else{taoTitleElement.textContent="Ancient Wisdom";taoTextElement.textContent="The Tao that can be told is not eternal.";}
            }

            function toggleTaoDisplay() { 
                if(taoContentState==='image'){if(taoTeChingChapters.length>0){taoImageElement.style.display='none';if(potdDescriptionContainer)potdDescriptionContainer.style.display='none';taoTitleElement.style.display='block';taoTextElement.style.display='block';taoContentState='text';}else console.log("No Tao chapters.");}
                else{taoImageElement.style.display='block';if(potdDescriptionContainer)potdDescriptionContainer.style.display='block';taoTitleElement.style.display='none';taoTextElement.style.display='none';taoContentState='image';}
            }
            if (taoDisplayContainer) taoDisplayContainer.addEventListener('click', toggleTaoDisplay);

            function setupBackgroundParameters(){baseHue=Math.random()*360;baseSpeed=(Math.random()*0.4)+0.1;canvas.style.backgroundColor=`hsl(${baseHue},30%,10%)`;}
            function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;const A=canvas.width*canvas.height;numShapes=Math.floor((A/(1920*1080))*80)+20;numShapes=Math.max(20,Math.min(numShapes,150));minSize=Math.max(1,Math.floor(canvas.width/400));maxSize=Math.max(minSize+2,Math.floor(canvas.width/150));connectionDistance=Math.max(60,Math.floor(canvas.width/18));}
            class Shape{constructor(x,y,r,dx,dy,c){this.x=x;this.y=y;this.radius=r;this.dx=dx;this.dy=dy;this.color=c;}draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.fillStyle=this.color;ctx.fill();ctx.closePath();}update(){if(this.x+this.radius>canvas.width||this.x-this.radius<0){this.dx*=-1;this.x=Math.max(this.radius,Math.min(canvas.width-this.radius,this.x));}if(this.y+this.radius>canvas.height||this.y-this.radius<0){this.dy*=-1;this.y=Math.max(this.radius,Math.min(canvas.height-this.radius,this.y));}this.x+=this.dx;this.y+=this.dy;this.draw();}}
            function initBackground(){shapes=[];resizeCanvas();for(let i=0;i<numShapes;i++){const r=Math.random()*(maxSize-minSize)+minSize,x=Math.random()*(canvas.width-r*2)+r,y=Math.random()*(canvas.height-r*2)+r,dx=(Math.random()-0.5)*baseSpeed*2,dy=(Math.random()-0.5)*baseSpeed*2,s=Math.floor(Math.random()*30)+60,l=Math.floor(Math.random()*20)+40;shapes.push(new Shape(x,y,r,dx,dy,`hsl(${baseHue+(Math.random()*50-25)},${s}%,${l}%)`));}}
            function connectPoints(){for(let a=0;a<shapes.length;a++)for(let b=a+1;b<shapes.length;b++){let D=Math.sqrt(Math.pow(shapes[a].x-shapes[b].x,2)+Math.pow(shapes[a].y-shapes[b].y,2));if(D<connectionDistance){const O=1-(D/connectionDistance);ctx.strokeStyle=`hsla(${baseHue},70%,60%,${O*0.35})`;ctx.lineWidth=Math.max(0.5,1-O);ctx.beginPath();ctx.moveTo(shapes[a].x,shapes[a].y);ctx.lineTo(shapes[b].x,shapes[b].y);ctx.stroke();}}}
            function animateBackground(){animationFrameId=requestAnimationFrame(animateBackground);ctx.clearRect(0,0,canvas.width,canvas.height);shapes.forEach(s=>s.update());connectPoints();}
            
            displayRandomLesson(); fetchNasaApod(); fetchPictureOfTheDay(); displayRandomTaoTeChingChapter(); 
            setupBackgroundParameters(); initBackground(); animateBackground(); 
            let resizeTimer; window.addEventListener('resize',()=>{clearTimeout(resizeTimer);if(animationFrameId)cancelAnimationFrame(animationFrameId);resizeTimer=setTimeout(()=>{initBackground();animateBackground();},250);});
        });
    </script>

</body>
</html>
